jQuery(document).ready(function(){$(document).on("click","a#action_20_delete",function(){var a=$(".action-container[data-action-id=20] form").first();a.append('<input type="hidden" name="delete_components" value="y">').append('<input type="hidden" name="action" value="20">');$.ajax({method:"POST",url:"/bitrix/admin/acrit_cleanmaster_processor.php",data:a.serialize(),success:function(b){try{var d=JSON.parse(b);if(d.result=="OK"&&d.action=="delete_components"){$(".action-container[data-action-id=20] form").html(d.DATA)}}catch(c){}}})});$(document).on("click","a#action_5_delete",function(){var a=$(".action-container.active");$.ajax({method:"post",url:"/bitrix/admin/acrit_cleanmaster_processor.php",data:{action:5,upload_delete_tmp:"y"},success:function(b){try{var d=JSON.parse(b);if(d.result=="OK"&&d.action=="upload_delete_tmp"){a.find("form").first().html(d.DATA)}}catch(c){}}})});$('.action-container[data-action-id="1"] input[type="checkbox"]').change(function(){var a=$('.action-container[data-action-id="1"]');var b=a.find("form").first();b.append('<input type="hidden" name="get_iblock" value="Y">');b.append('<input type="hidden" name="action" value="1">');$.ajax({method:"post",url:"/bitrix/admin/acrit_cleanmaster_processor.php",data:b.serialize(),success:function(c){try{var f=JSON.parse(c);if(f.result=="OK"&&f.action=="get_iblock"){a.find(".deleted-iblocks").first().html(f.DATA)}}catch(d){}}})});$(document).on("click",".action-process",function(){var b=$(".action-container.active");var c=$(".action-container.active form");c.append('<input type="hidden" name="clear" value="Y">');c.append('<input type="hidden" name="action" value="'+b.attr("data-action-id")+'">');var a=$(this);a.addClass("disable");$.ajax({method:"post",url:"/bitrix/admin/acrit_cleanmaster_processor.php",data:c.serialize(),success:function(d){try{var g=JSON.parse(d);if(g.result=="OK"&&g.action=="process"){b.find("form").first().html(g.DATA)}}catch(f){}a.removeClass("disable")}})});$(".clean-action-wrapper a.action-container-next").click(function(){var b=$(".action-container.active");var a=$(this).attr("data-action-id");var c=$('.action-container[data-action-id="'+a+'"]');var d=$(".clean-action-wrapper a.action-container-prev");b.hide().removeClass("active");d.text(action_list[b.attr("data-action-id")]).attr("data-action-id",selected_action_list[a]["prev"]);$(this).text(action_list[selected_action_list[a]["next"]]).attr("data-action-id",selected_action_list[a]["next"]);c.show().addClass("active");if(isNaN(parseInt(selected_action_list[a]["next"]))){$(this).parent().addClass("hide")}if(d.parent().hasClass("hide")){d.parent().removeClass("hide")}});$(".clean-action-wrapper a.action-container-prev").click(function(){var c=$(".action-container.active");var b=$(this).attr("data-action-id");var d=$('.action-container[data-action-id="'+b+'"]');var a=$(".clean-action-wrapper a.action-container-next");c.hide().removeClass("active");a.text(action_list[c.attr("data-action-id")]).attr("data-action-id",selected_action_list[b]["next"]);$(this).text(action_list[selected_action_list[b]["prev"]]).attr("data-action-id",selected_action_list[b]["prev"]);d.show().addClass("active");if(isNaN(parseInt(selected_action_list[b]["prev"]))){$(this).parent().addClass("hide")}if(a.parent().hasClass("hide")){a.parent().removeClass("hide")}});$(".clean-action-menu li a").click(function(){var d=$(".action-container.active");var b=$(this).attr("data-action-id");var c=$('.action-container[data-action-id="'+b+'"]');d.hide().removeClass("active");c.show().addClass("active");var e=$(".clean-action-wrapper a.action-container-prev");var a=$(".clean-action-wrapper a.action-container-next");e.attr("data-action-id",selected_action_list[b]["prev"]).text(action_list[selected_action_list[b]["prev"]]).parent().removeClass("hide");a.attr("data-action-id",selected_action_list[b]["next"]).text(action_list[selected_action_list[b]["next"]]).parent().removeClass("hide");if(isNaN(parseInt(selected_action_list[b]["prev"]))){e.parent().addClass("hide")}if(isNaN(parseInt(selected_action_list[b]["next"]))){a.parent().addClass("hide")}});$("#diagnostic").click(function(){var a=this;$(a).fadeTo(0,0.5);$.ajax({method:"post",url:"/bitrix/admin/acrit_cleanmaster_processor.php",data:"funcName=diagnostic&diagnosticStep=1",success:function(b){try{var d=JSON.parse(b);if(d.result=="OK"&&d.action=="process"){$(".cleanmaster-area").first().append(d.DATA)}}catch(c){console.log(c);alert("Error. Please, refresh page!")}$(a).fadeTo(0,1)}})})});